<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Valentine</title>
    <link rel="stylesheet" href="../assets/style.css" />
    <style>
      :root {
        --bg-1: #f2fbff;
        --bg-2: #d6f1ff;
        --card: #f8fdff;
        --accent: #3c8ddf;
        --accent-2: #7bb8ff;
        --text: #1e2d3f;
      }

      .idea2-page .btn-flat {
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(60, 141, 223, 0.45);
        color: var(--accent);
        box-shadow: none;
      }

      .idea2-page .heart {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        transform: none;
        background: rgba(88, 170, 255, 0.9);
        box-shadow: 0 0 14px rgba(88, 170, 255, 0.35);
        animation-name: bubbleLift;
      }

      .idea2-page .heart::before,
      .idea2-page .heart::after {
        display: none;
      }

      .idea2-page .flower {
        width: 14px;
        height: 14px;
        background: #7bb8ff;
        box-shadow: 0 0 10px rgba(123, 184, 255, 0.45);
      }

      .idea2-page .flower::before,
      .idea2-page .flower::after {
        background: #4f9ef4;
      }

      @keyframes bubbleLift {
        0% {
          transform: translateY(100vh) scale(0.7);
          opacity: 0;
        }
        20% {
          opacity: 0.65;
        }
        55% {
          transform: translateY(42vh) translateX(8px) scale(1.2);
        }
        100% {
          transform: translateY(-120px) translateX(-14px) scale(0.9);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="idea2-page">
    <div class="heart-field" aria-hidden="true"></div>
    <div class="rose-field" aria-hidden="true"></div>

    <main>
      <section class="card route" data-route="intro">
        <h1 class="title">Please fill in your name</h1>
        <form id="name-form" class="actions" style="flex-direction: column; align-items: center;">
          <input
            id="name-input"
            name="name"
            type="text"
            placeholder="Your name"
            required
            maxlength="24"
            style="padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(60, 141, 223, 0.35); font-family: 'Quicksand', sans-serif; font-size: 1rem; width: min(90%, 320px);"
          />
          <button class="btn btn-flat" type="submit">Continue</button>
        </form>
      </section>

      <section class="card route layout-banner" data-route="ask2">
        <h1 class="title">Will you be my Valentine, <span id="name-slot">friend</span>?</h1>
        <p class="subtitle">I made this just for you.</p>
        <div class="hero">
          <img
            src="https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3bGR5b2NldDRlYmZpZDFiZHkzYXl1ZDNzejI5MXliYXc3ZGNubWlmMiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/l0HegFEAiFTit3ioM/giphy.gif"
            alt="Cute animation"
          />
        </div>
        <div class="actions">
          <button class="btn btn-primary" data-safe onclick="location.hash='final2'">Yes</button>
          <button class="btn btn-secondary" data-runaway onclick="location.hash='please2'">No</button>
        </div>
      </section>

      <section class="card route layout-stack" data-route="please2">
        <div>
          <span class="badge">Wait a sec</span>
          <h1 class="title">Are you sure?</h1>
          <p class="subtitle">I was hoping for a yes.</p>
          <div class="actions">
          <button class="btn btn-primary" onclick="location.hash='ask2'">Ok, ask again</button>
          </div>
        </div>
        <div class="hero">
          <img
            src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbDBhMXlheWVnN2g4Z3hnemh0OWpmdWt5YWR3eTRuYzgxdXQ1aWYyMCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/HKvbasW8mKOcG2TCmc/giphy.gif"
            alt="Celebration animation"
          />
        </div>
      </section>

      <section class="card route layout-stack" data-route="final2">
        <h1 class="title">My favorite answer.</h1>
        <p class="subtitle">Flowers just for you.</p>
        <div class="hero">
          <img
            src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbDBhMXlheWVnN2g4Z3hnemh0OWpmdWt5YWR3eTRuYzgxdXQ1aWYyMCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/JSxzmyV7AqeABDQKed/giphy.gif"
            alt="Pleading animation"
          />
        </div>
        <div class="actions">
          <button class="btn btn-primary" onclick="location.hash='ask2'">Replay</button>
        </div>
      </section>
    </main>

    <script src="../assets/app.js"></script>
    <script>
      const nameForm = document.getElementById("name-form");
      const nameInput = document.getElementById("name-input");
      const nameSlot = document.getElementById("name-slot");

      function applyName() {
        const saved = localStorage.getItem("valentineName");
        if (saved) {
          nameSlot.textContent = saved;
        }
      }

      if (nameForm) {
        nameForm.addEventListener("submit", (event) => {
          event.preventDefault();
          const value = nameInput.value.trim();
          if (value) {
            localStorage.setItem("valentineName", value);
            applyName();
            location.hash = "ask2";
          }
        });
      }

      window.addEventListener("hashchange", applyName);
      window.addEventListener("DOMContentLoaded", applyName);
    </script>
  </body>
</html>
